window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var h=c.split("/");if(h=h[h.length-1],!e[h]){var a="function"==typeof __require&&__require;if(!s&&a)return a(h,!0);if(r)return r(h,!0);throw new Error("Cannot find module '"+c+"'")}c=h}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({DrawManager:[function(t,e,o){"use strict";cc._RF.push(e,"defb92JRKJLx76VL0ST8tMX","DrawManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.DrawManager=void 0;var c=cc._decorator,s=c.ccclass,h=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.circleNode=null,e.paths=[],e.nodeGraphics=null,e.circleNodeGraphics=null,e.firstMoveTo=!1,e}return i(e,t),e.prototype.init=function(t,e){this.nodeGraphics=this.node.getComponent(cc.Graphics),this.nodeGraphics.lineWidth=t,this.nodeGraphics.fillColor=e,this.nodeGraphics.strokeColor=e,this.circleNodeGraphics=this.circleNode.getComponent(cc.Graphics),this.circleNodeGraphics.lineWidth=t,this.circleNodeGraphics.fillColor=e,this.circleNodeGraphics.strokeColor=e,this.addEventListener()},e.prototype.onNodeTouchStart=function(t){this.paths.length>0&&this.drawPathWithTempPos(t.getLocation())},e.prototype.onNodeTouchCancel=function(){},e.prototype.onNodeTouchEnd=function(t){this.pushDrawPathPos(t.getLocation())},e.prototype.onNodeTouchMove=function(t){this.paths.length>0&&this.drawPathWithTempPos(t.getLocation())},e.prototype.addEventListener=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onNodeTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onNodeTouchCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onNodeTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onNodeTouchMove,this)},e.prototype.removeEventListener=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onNodeTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onNodeTouchCancel,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onNodeTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onNodeTouchMove,this)},e.prototype.onDestroy=function(){this.removeEventListener()},e.prototype.drawPathWithTempPos=function(t){var e;this.nodeGraphics.clear();for(var o=0;o<this.paths.length;o++)e=this.getPosWithNode(this.paths[o]),0===o?this.nodeGraphics.moveTo(e.x,e.y):this.nodeGraphics.lineTo(e.x,e.y),console.log("tempPos",e.x,e.y,this.nodeGraphics.lineWidth);for(e=this.getPosWithNode(t),this.nodeGraphics.lineTo(e.x,e.y),console.log("tempPos",e.x,e.y,this.nodeGraphics.lineWidth),this.nodeGraphics.stroke(),this.circleNodeGraphics.clear(),o=0;o<this.paths.length;o++)e=this.getPosWithNode(this.paths[o]),0===o&&this.circleNodeGraphics.moveTo(e.x,e.y),this.circleNodeGraphics.circle(e.x,e.y,15),console.log("pos",e.x,e.y);e=this.getPosWithNode(t),this.circleNodeGraphics.circle(e.x,e.y,15),this.circleNodeGraphics.fill()},e.prototype.getPosWithNode=function(t){return this.node.parent.convertToNodeSpaceAR(t)},e.prototype.pushDrawPathPos=function(t){var e;this.paths.push(t),this.nodeGraphics.clear(),this.nodeGraphics.moveTo(0,0);for(var o=0;o<this.paths.length;o++)e=this.getPosWithNode(this.paths[o]),0===o?this.nodeGraphics.moveTo(e.x,e.y):this.nodeGraphics.lineTo(e.x,e.y),console.log("pos",e.x,e.y);for(this.nodeGraphics.stroke(),this.circleNodeGraphics.clear(),o=0;o<this.paths.length;o++)e=this.getPosWithNode(this.paths[o]),0===o&&this.circleNodeGraphics.moveTo(e.x,e.y),this.circleNodeGraphics.circle(e.x,e.y,15),console.log("pos",e.x,e.y);this.circleNodeGraphics.fill()},e.prototype.clearDraw=function(){this.paths=[],this.nodeGraphics.clear(),this.circleNodeGraphics.clear()},r([h(cc.Graphics)],e.prototype,"circleNode",void 0),r([s],e)}(cc.Component);o.DrawManager=a,cc._RF.pop()},{}],MainScene:[function(t,e,o){"use strict";cc._RF.push(e,"b73a19q2lVMIY0+YaT1l9Rj","MainScene");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./DrawManager"),s=cc._decorator,h=s.ccclass,a=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.draw=null,e.drawClearBtn=null,e.downLay=null,e.downTypeBtn=null,e.typeLabel=null,e.isShowDownLay=!1,e}return i(e,t),e.prototype.start=function(){this.draw.init(5,cc.Color.BLACK),this.addEventListener()},e.prototype.onNodeTouchEnd=function(){this.draw.clearDraw()},e.prototype.onDownTypeBtn=function(){var t=this;if(this.downTypeBtn.getComponent(cc.Button).interactable){this.downTypeBtn.getComponent(cc.Button).interactable=!1;var e=this.isShowDownLay?this.downLay.height:0;cc.tween(this.downLay).to(.2,{y:e}).call(function(){t.isShowDownLay=!t.isShowDownLay,t.downTypeBtn.angle=t.isShowDownLay?180:0,t.downTypeBtn.getComponent(cc.Button).interactable=!0}).start()}},e.prototype.addEventListener=function(){var t=this;this.drawClearBtn.on(cc.Node.EventType.TOUCH_END,this.onNodeTouchEnd,this),this.downTypeBtn.on(cc.Node.EventType.TOUCH_END,this.onDownTypeBtn,this),this.downLay.children.forEach(function(e,o){e.on(cc.Node.EventType.TOUCH_END,function(){switch(o){case 0:t.typeLabel.string="\u6c34\u6ce5";break;case 1:t.typeLabel.string="\u74e6\u7247";break;case 2:t.typeLabel.string="\u8349\u6728"}t.onDownTypeBtn()},t)})},e.prototype.onDestroy=function(){this.removeEventListener()},e.prototype.removeEventListener=function(){this.drawClearBtn.off(cc.Node.EventType.TOUCH_END,this.onNodeTouchEnd,this),this.downTypeBtn.off(cc.Node.EventType.TOUCH_END,this.onDownTypeBtn,this)},r([a(c.DrawManager)],e.prototype,"draw",void 0),r([a(cc.Node)],e.prototype,"drawClearBtn",void 0),r([a(cc.Node)],e.prototype,"downLay",void 0),r([a(cc.Node)],e.prototype,"downTypeBtn",void 0),r([a(cc.Label)],e.prototype,"typeLabel",void 0),r([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./DrawManager":"DrawManager"}]},{},["DrawManager","MainScene"]);