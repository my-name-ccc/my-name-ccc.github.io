window.__require=function t(o,e,n){function i(a,h){if(!e[a]){if(!o[a]){var c=a.split("/");if(c=c[c.length-1],!o[c]){var d="function"==typeof __require&&__require;if(!h&&d)return d(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}}var r=e[a]={exports:{}};o[a][0].call(r.exports,function(t){return i(o[a][1][t]||t)},r,r.exports,t,o,e,n)}return e[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({Cache:[function(t,o,e){"use strict";cc._RF.push(o,"fef43XjWlhIQ4AKfr5E2NIH","Cache");var n={NodePool:{},palyerPos:null,palyerMovePosX:null,palyerMovePosY:null,palyerMovePos:null,snakeMap:[],bodynum:0,goldnum:100,bodyPool:[],angle:null,angle2:null,speed:3,BodyDistance:33,headPrefab:null,Bodyposition:null,Bodyposition2:null};o.exports=n,cc._RF.pop()},{}],NodePool:[function(t,o,e){"use strict";cc._RF.push(o,"17ee7q74yxLG4zGxkl7SgsE","NodePool");var n={creationEnemyPool:function(t,o){for(var e=new cc.NodePool,n=0;n<o;++n){var i=cc.instantiate(t);e.put(i)}return e},destroyEnemy:function(t,o){o.put(t)},getEnemy:function(t){var o=null;if(t.size()>1)o=t.get();else{var e=t.get();o=cc.instantiate(e),t.put(e)}return o}};o.exports=n,cc._RF.pop()},{}],body:[function(t,o,e){"use strict";cc._RF.push(o,"c00faCUKdNAja4qZJTkWQad","body");var n=t("../Modules/NodePool"),i=t("../Cache/Cache");cc.Class({extends:cc.Component,properties:{snakeName:null,snakeIndex:0,isDead:!1,speet:null,prePointSnapshot:null,startPointSnapshot:null,distanceSnapshot:0},start:function(){},update:function(t){if(this.parentNode){this.prePointSnapshot||(this.prePointSnapshot=this.parentNode.getPosition(),this.startPointSnapshot=this.node.getPosition(),this.distanceSnapshot=this.startPointSnapshot.sub(this.prePointSnapshot).mag()),this.node.getPosition().sub(this.startPointSnapshot).mag()>=this.distanceSnapshot-.1&&(this.prePointSnapshot=this.parentNode.getPosition(),this.startPointSnapshot=this.node.getPosition(),this.distanceSnapshot=this.startPointSnapshot.sub(this.prePointSnapshot).mag());var o=this.prePointSnapshot.sub(this.startPointSnapshot);this.node.x+=o.x/1*t*2*i.speed,this.node.y+=o.y/1*t*2*i.speed}},addBody:function(t){if(this.childrenNode)this.childrenNode.getComponent("body").addBody(t);else{var o=n.getEnemy(i.NodePool.body);cc.find("Canvas/map/playerLay").addChild(o);var e=Math.cos(t.moveAngle),s=Math.sin(t.moveAngle);o.position=cc.v2(this.node.position.x-e*i.BodyDistance,this.node.position.y-s*i.BodyDistance),o.scaleY=this.node.scaleY,o.scaleX=this.node.scaleX,o.zIndex=this.node.zIndex-1,o.getComponent("body").parentNode=this.node,this.childrenNode=o}},setBodyParent:function(t){void 0===this.parentNode?this.parentNode=t:this.parentNode=this.node}}),cc._RF.pop()},{"../Cache/Cache":"Cache","../Modules/NodePool":"NodePool"}],camera:[function(t,o,e){"use strict";cc._RF.push(o,"85120pNJCxB2Klj5I8Qgzjm","camera");var n=t("../Cache/Cache");cc.Class({extends:cc.Component,properties:{map:{default:null,type:cc.Node},Canvas:{default:null,type:cc.Node}},start:function(){},update:function(t){this.node.x=n.palyerMovePosX,this.node.y=n.palyerMovePosY}}),cc._RF.pop()},{"../Cache/Cache":"Cache"}],directionBg:[function(t,o,e){"use strict";cc._RF.push(o,"58494Rm51VGeJbkXT/PBTUb","directionBg");var n=t("../Cache/Cache");cc.Class({extends:cc.Component,properties:{dot:{default:null,type:cc.Node,displayName:"\u6447\u6746\u8282\u70b9"},bg:{default:null,type:cc.Node,displayName:"\u6447\u6746\u80cc\u666f"},_angle:{default:null,displayName:"\u5f53\u524d\u89e6\u6478\u7684\u89d2\u5ea6"},_radian:{default:null,displayName:"\u5f27\u5ea6"},_rotate:{default:null,displayName:"\u89d2\u5ea6"}},onLoad:function(){this._initTouchEvent()},_initTouchEvent:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(cc.Node.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},update:function(t){},_getDistance:function(t,o){return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))},_getRadian:function(t){return this._radian=Math.PI/180*this._getAngle(t),this._radian},_getAngle:function(t){var o=this.node.getPosition();return this._angle=Math.atan2(t.y-o.y,t.x-o.x)*(180/Math.PI),this._angle},_touchStartEvent:function(t){var o=this.node.convertToNodeSpaceAR(t.getLocation()),e=this._getDistance(o,cc.v2(0,0)),n=this.bg.width/2;this._stickPos=o;var i=this.bg.getPosition().x+o.x,s=this.bg.getPosition().y+o.y;return n>e&&(this.dot.setPosition(cc.v2(i,s)),!0)},_touchMoveEvent:function(t){var o=this.node.convertToNodeSpaceAR(t.getLocation()),e=this._getDistance(o,cc.v2(0,0)),i=this.bg.width/2,s=o.x,a=o.y;if(i>e)this.dot.setPosition(cc.v2(s,a));else{var h=Math.cos(this._getRadian(cc.v2(s,a)))*i,c=Math.sin(this._getRadian(cc.v2(s,a)))*i;this.dot.setPosition(cc.v2(h,c))}this._getAngle(cc.v2(s,a)),n.angle=this._angle,this._getRadian(cc.v2(s,a))},_touchEndEvent:function(){this.dot.setPosition(this.bg.getPosition())}}),cc._RF.pop()},{"../Cache/Cache":"Cache"}],gameBtn:[function(t,o,e){"use strict";cc._RF.push(o,"341407muP1LZoq1uwWbsMa1","gameBtn"),cc.Class({extends:cc.Component,properties:{},start:function(){},gameStart:function(){cc.director.loadScene("game")}}),cc._RF.pop()},{}],gold:[function(t,o,e){"use strict";cc._RF.push(o,"f7515lFLzFNupd7KnrN5tCs","gold");t("../Modules/NodePool"),t("../Cache/Cache");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.addgold()},start:function(){},addgold:function(){this.weight=parseInt(20*Math.random()+10),this.node.width=this.weight,this.node.height=this.weight,this.node.getComponent(cc.CircleCollider).radius=this.weight/2},getwidth:function(){return this.w=this.node.width,this.w}}),cc._RF.pop()},{"../Cache/Cache":"Cache","../Modules/NodePool":"NodePool"}],main:[function(t,o,e){"use strict";cc._RF.push(o,"a1a53FaTQdGuL1OT/QQgRPs","main");var n=t("../Modules/NodePool"),i=t("../Cache/Cache");cc.Class({extends:cc.Component,properties:{player:{default:null,type:cc.Prefab},body:{default:null,type:cc.Prefab},gold:{default:null,type:cc.Prefab}},onLoad:function(){this.createpos(),this.createangle()},start:function(){i.NodePool.player=n.creationEnemyPool(this.player,3),i.NodePool.body=n.creationEnemyPool(this.body,100),i.NodePool.gold=n.creationEnemyPool(this.gold,200),this.createhead();for(var t=0;t<100;t++)this.createpos(),this.creategold();this.schedule(function(){if(i.goldnum<90)for(var t=0;t<10;t++)this.createpos(),this.creategold(),i.goldnum+=1},5)},creategold:function(){var t=n.getEnemy(i.NodePool.gold);t.setPosition(i.palyerPos),cc.find("Canvas/map/itemLay").addChild(t)},createhead:function(){var t=n.getEnemy(i.NodePool.player),o=t.getComponent("player");cc.find("Canvas/map/playerLay").addChild(t),t.setPosition(i.palyerPos);for(var e=0;e<7;e++)o.addBody()},createpos:function(){this.x=1100*Math.random()+200,this.y=600*Math.random()+200,i.palyerPos=cc.v2(this.x,this.y)},createangle:function(){this.angle=360*Math.random(),i.angle=this.angle},update:function(t){}}),cc._RF.pop()},{"../Cache/Cache":"Cache","../Modules/NodePool":"NodePool"}],minimap:[function(t,o,e){"use strict";cc._RF.push(o,"bac797/bsJBu6t6QaKwLfSi","minimap");var n=t("../Cache/Cache");cc.Class({extends:cc.Component,properties:{mapPlayer:{default:null,type:cc.Node}},start:function(){},update:function(t){if(void 0!==n.palyerMovePosX&&void 0!==n.palyerMovePosY){var o=n.palyerMovePosX,e=n.palyerMovePosY;this.mapWidth=cc.find("Canvas/map").width,this.mapHeight=cc.find("Canvas/map").height,this.mapPlayer.x=o*(200/this.mapWidth),this.mapPlayer.y=e*(200/this.mapHeight)}}}),cc._RF.pop()},{"../Cache/Cache":"Cache"}],player:[function(t,o,e){"use strict";cc._RF.push(o,"cd2d1t664BG8ayyfYmCtNgN","player");var n=t("../Modules/NodePool"),i=t("../Cache/Cache");cc.Class({extends:cc.Component,properties:{score:0,rotation:0,moveAngle:0,bodySize:0,mapScale:0},onLoad:function(){cc.director.getCollisionManager().enabled=!0,cc.director.getCollisionManager().enabledDebugDraw=!1},onCollisionEnter:function(t,o){if("gold"===t.node.group){var e=t.node.getComponent("gold");if(this.score+=e.getwidth(),cc.find("Canvas/UI/score").getComponent(cc.Label).string=this.score,n.destroyEnemy(t.node,i.NodePool.gold),i.goldnum-=1,parseInt(this.score/100)>this.bodySize){this.bodyScript=cc.find("Canvas/map/playerLay").children[0].getComponent("body");var s={};s.moveAngle=this.moveAngle,this.bodyScript.addBody(s),this.bodySize+=1}parseInt(this.bodySize/1)>this.mapScale&&(this.mapScale+=1,cc.find("Canvas/map").scaleX=1-this.mapScale/1e3*2,cc.find("Canvas/map").scaleY=1-this.mapScale/1e3*2)}},start:function(){},playermove:function(){if(this.playerMove2(),this.node.x<24?this.node.x=24:this.node.x>1476&&(this.node.x=1476),this.node.y<24)this.node.y=24;else if(this.node.y>976)this.node.y=976;else if(24<this.node.x<1476&&24<this.node.y<976){this.moveAngle=(this.node.rotation-90)*Math.PI/-180;var t=Math.cos(this.moveAngle),o=Math.sin(this.moveAngle);this.node.x+=t*i.speed,this.node.y+=o*i.speed,i.palyerMovePos=cc.v2(this.node.x,this.node.y),i.palyerMovePosX=this.node.x,i.palyerMovePosY=this.node.y}},addBody:function(){if(this.node.position=i.palyerPos,this.moveAngle=this.spawnrotation(),this.moveAngle=(this.moveAngle-90)*Math.PI/-180,this.childrenNode){var t={};t.moveAngle=this.moveAngle,this.childrenNode.getComponent("body").addBody(t)}else{var o=n.getEnemy(i.NodePool.body);cc.find("Canvas/map/playerLay").addChild(o);var e=Math.cos(this.moveAngle),s=Math.sin(this.moveAngle);o.position=cc.v2(this.node.x-e*i.BodyDistance,this.node.y-s*i.BodyDistance),o.scaleY=this.node.scaleY,o.scaleX=this.node.scaleX,o.zIndex=this.node.zIndex-1,o.getComponent("body").parentNode=this.node,this.childrenNode=o}},playerMove2:function(){i.angle>90&&i.angle<180?(this.rotation=i.angle-90,this.rotation=-this.rotation):(this.rotation=i.angle-90,this.rotation=360-this.rotation),this.rotation>360?this.rotation-=360:this.rotation<0&&(this.rotation+=360),this.node.rotation>360?this.node.rotation-=360:this.node.rotation<0&&(this.node.rotation+=360),Math.abs(this.node.rotation-this.rotation)<Math.abs(this.node.rotation>this.rotation?this.rotation+360-this.node.rotation:this.rotation-(this.node.rotation+360))?this.node.rotation>this.rotation?(this.node.rotation-=6,this.node.rotation<this.rotation&&(this.node.rotation=this.rotation)):this.node.rotation<this.rotation&&(this.node.rotation+=6,this.node.rotation>this.rotation&&(this.node.rotation=this.rotation)):Math.abs(this.node.rotation-this.rotation)>Math.abs(this.node.rotation>this.rotation?this.rotation+360-this.node.rotation:this.rotation-(this.node.rotation+360))&&(this.node.rotation>this.rotation?this.node.rotation+=6:this.node.rotation<this.rotation&&(this.node.rotation-=6),this.node.rotation>360?this.node.rotation-=360:this.node.rotation<0&&(this.node.rotation+=360))},spawnrotation:function(){return i.angle>90&&i.angle<180?(this.rotation=i.angle-90,-this.rotation>360?this.rotation-=360:-this.rotation<0&&(this.rotation+=360),this.node.rotation=this.rotation,-this.rotation):(this.rotation=i.angle-90,this.rotation=360-this.rotation,this.rotation>360?this.rotation-=360:this.rotation<0&&(this.rotation+=360),this.node.rotation=this.rotation,this.rotation)},update:function(t){this.playermove()}}),cc._RF.pop()},{"../Cache/Cache":"Cache","../Modules/NodePool":"NodePool"}],speed:[function(t,o,e){"use strict";cc._RF.push(o,"86d43oV3o5Ai6Ns2Oj9WPbj","speed");var n=t("../Cache/Cache");cc.Class({extends:cc.Component,properties:{speed:{default:null,type:cc.Node}},start:function(){this.speedsCancel(),this.speedsDown(),this.speedsMove(),this.speedsEnd()},speedsDown:function(){this.speed.on("touchstart",function(t){n.speed=6},this)},speedsMove:function(){this.speed.on("touchmove",function(t){n.speed=6},this)},speedsEnd:function(){this.speed.on("touchend",function(t){n.speed=3},this)},speedsCancel:function(){this.speed.on("touchcancel",function(t){n.speed=3},this)},update:function(t){}}),cc._RF.pop()},{"../Cache/Cache":void 0}]},{},["Cache","NodePool","gameBtn","gold","directionBg","main","minimap","camera","body","player","speed"]);